select distinct ?resource replace(str(?p),".*[#/]","") as ?interaction ?targetNode
{
 ?resource	a owl:Class.
 {
  ?resource	rdfs:subClassOf ?restriction.

  ?restriction	a owl:Restriction;
		owl:onProperty ?p;
		owl:someValuesFrom ?targetNode.
 }
UNION
 {
  ?p		rdfs:domain ?resource.
  ?p		rdfs:range ?targetNode.
 }
 ?targetNode a ?x. # no literal


}
